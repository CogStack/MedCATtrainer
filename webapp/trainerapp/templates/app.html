{% extends 'base.html' %}
{% load staticfiles %}
{% load js %}

{% block style %}
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  <!-- TODO: use non-cdn links -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
{% endblock %}

{% block body %}
  <div id="app" class="container-fluid app-container">
    <div class="row">
      <div class="col-sm-12">
        <h4>{{ title }} Training Samples</h4>
      </div>
    </div>
    <div class="row app-main">
      <sidebar v-bind:current-doc="current.docIndex" v-bind:current-span="current.spanIndex"
               v-bind:texts="allTexts">
      </sidebar>
      <clinical-text v-bind:text="current.text" v-bind:spans="current.spans" v-bind:labels="current.labels"
                     v-bind:span-index="current.spanIndex" class="col-9 border-top"
                     style="height: 100%; overflow: auto;" id="mainTextArea">
      </clinical-text>
    </div>
    <div class="row app-footer">
      <div class="col-sm-12" style="text-align: center">
        <button :disabled="current.docIndex === -1 || (current.docIndex === 0 && current.spanIndex === 0)"
                v-on:click="back" type="button" style="height: 100%" class="btn btn-warning mb-2"><i class="fas fa-backward"></i></button>
        <button :disabled="!allTexts.length" v-on:click="yes" type="button" style="height: 100%" class="btn btn-success mb-2">Yes</button>
        <button :disabled="!allTexts.length" v-on:click="no" type="button" style="height: 100%" class="btn btn-danger mb-2">No</button>
        <button :disabled="current.docIndex === -1 || (current.docIndex === allTexts.length - 1 && current.spanIndex === current.spans.length - 1)"
                v-on:click="next" type="button" style="height: 100%"
                class="btn btn-warning mb-2"><i class="fas fa-forward"></i></button>
        <button :disabled="!allTexts.length" v-on:click="save" class="btn btn-primary mb-2" type="button" style="height: 100%; float: right;">Submit</button>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <!--<script src=ยก"https://intercoolerreleases-leaddynocom.netdna-ssl.com/intercooler-1.2.1.min.js"></script>-->

  <!-- switch to production CDN before going to prod! -->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>

  <script type="text/javascript">
    taskTrainingData = function() {
      return {{ data | js }};
    };
  </script>
  <script src="{% static 'js/app.js' %}"></script>

{% endblock %}
